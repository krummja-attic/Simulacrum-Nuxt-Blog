---
title: refactor/menus
description: Rework of menu system
project: Anathema
repo: https://github.com/krummja/Anathema
---

## The Goal

I want to be able to (a) display a list of inventory items on the screen, with arrow key selection. On selection of an inventory item, I should get back a list of interactions, structured as methods keyed to a string to display in the menu.

## The Problem

So right now I can achieve goal (a). Getting a list of inventory items and displaying them to the screen is trivial.

### InventoryMenu

In the `InventoryMenu` I load the contents of the player's current inventory. I preformat the elements in contents and pass the object into a `MenuList` instance, which handles input and rendering for me.

```python
class InventoryMenu(MenuOverlay):
	# ...
	def on_enter(self) -> None:
		data = self.game.player.entity['Inventory'].contents
		menu = MenuList(33, 1, 32, 48, " Inventory ", MenuData(data))
		self.push_menu(menu)
```

The `MenuData` object simply pulls the data from contents and enumerates it for easy indexing:

```python
class MenuData(defaultdict):
	def __init__(self, data_source) -> None:
		super().__init__()
		for i, d in enumerate(data_source):
			self[i] = d
```

I suppose one immediate improvement I could implement is to not make this a class, but instead just directly handle this as a dict.

```python
def on_enter(self) -> None:
	data = self.game.player.entity['Inventory'].contents
	menu_data = {}
	for i, d in enumerate(data):
		menu_data[i] = d
	menu = MenuList(33, 1, 32, 48, " Inventory ", menu_data)
```

In order to normalize the interface with... uh... well, the interface, I should consider using a function as the value for each item, so that way there's no weird issues with using the same code for the interactions.
